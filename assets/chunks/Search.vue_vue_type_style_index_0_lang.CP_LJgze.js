import{d as q,aj as Z,s as D,c as _,b as y,K as E,a as Q,k as j,f as M,x as a,O as T,$ as ee,a1 as Y,F as R,j as te,ak as A,r as b,w as B,P as se,h as H,al as ne,am as ae,n as le,an as oe,ao as re,Y as ie,I as ue,v as g,a3 as ce,ap as de,aq as L,t as G,G as pe,g as he}from"./framework.DfOqixww.js";function fe(e,t){const n=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(n);return[s=>{const l=se(o,s);if(l||l===null)return l;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},s=>(ie(o,s),s)]}function me(e){let t=!1,n;const o=re(!0);return(...s)=>(t||(n=o.run(()=>e(...s)),t=!0),n)}function z(e){return typeof e=="function"?e():a(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ve=e=>typeof e<"u";function K(e){var t;const n=z(e);return(t=n==null?void 0:n.$el)!=null?t:n}function ge(e){return JSON.parse(JSON.stringify(e))}function ye(e,t,n,o={}){var s,l,r;const{clone:u=!1,passive:f=!1,eventName:m,deep:v=!1,defaultValue:h,shouldEmit:c}=o,i=A(),C=n||(i==null?void 0:i.emit)||((s=i==null?void 0:i.$emit)==null?void 0:s.bind(i))||((r=(l=i==null?void 0:i.proxy)==null?void 0:l.$emit)==null?void 0:r.bind(i==null?void 0:i.proxy));let S=m;S=S||`update:${t.toString()}`;const I=p=>u?typeof u=="function"?u(p):ge(p):p,N=()=>ve(e[t])?I(e[t]):h,d=p=>{c?c(p)&&C(S,p):C(S,p)};if(f){const p=N(),w=b(p);let $=!1;return B(()=>e[t],k=>{$||($=!0,w.value=I(k),le(()=>$=!1))}),B(w,k=>{!$&&(k!==e[t]||v)&&d(k)},{deep:v}),w}else return D({get(){return N()},set(p){d(p)}})}function V(e){return e?e.flatMap(t=>t.type===R?V(t.children):[t]):[]}function be(e){return D(()=>{var t;return z(e)?!!((t=K(e))!=null&&t.closest("form")):!0})}function W(){const e=A(),t=b(),n=D(()=>{var r,u;return["#text","#comment"].includes((r=t.value)==null?void 0:r.$el.nodeName)?(u=t.value)==null?void 0:u.$el.nextElementSibling:K(t)}),o=Object.assign({},e.exposed),s={};for(const r in e.props)Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>e.props[r]});if(Object.keys(o).length>0)for(const r in o)Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>o[r]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=s;function l(r){t.value=r,!(r instanceof Element||!r)&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>r.$el}),e.exposed=s)}return{forwardRef:l,currentRef:t,currentElement:n}}const we=q({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>{var o,s;if(!n.default)return null;const l=V(n.default()),r=l.findIndex(v=>v.type!==ne);if(r===-1)return l;const u=l[r];(o=u.props)==null||delete o.ref;const f=u.props?T(t,u.props):t;t.class&&(s=u.props)!=null&&s.class&&delete u.props.class;const m=ae(u,f);for(const v in f)v.startsWith("on")&&(m.props||(m.props={}),m.props[v]=f[v]);return l.length===1?m:(l[r]=m,l)}}}),F=q({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:n}){const o=e.asChild?"template":e.as;return typeof o=="string"&&["area","img","input"].includes(o)?()=>H(o,t):o!=="template"?()=>H(e.as,t,{default:n.default}):()=>H(we,t,{default:n.default})}});oe({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});me(()=>b([]));function ke(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}ke();const _e=["name","disabled","required","value","checked","data-state","data-disabled"],[Se,$e]=fe("SwitchRoot"),P=q({__name:"SwitchRoot",props:{defaultChecked:{type:Boolean},checked:{type:Boolean,default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(e,{emit:t}){const n=e,o=t,{disabled:s}=Z(n),l=ye(n,"checked",o,{defaultValue:n.defaultChecked,passive:n.checked===void 0});function r(){s.value||(l.value=!l.value)}const{forwardRef:u,currentElement:f}=W(),m=be(f),v=D(()=>{var h;return n.id&&f.value?(h=document.querySelector(`[for="${n.id}"]`))==null?void 0:h.innerText:void 0});return $e({checked:l,toggleCheck:r,disabled:s}),(h,c)=>(y(),_(R,null,[E(a(F),T(h.$attrs,{id:h.id,ref:a(u),role:"switch",type:h.as==="button"?"button":void 0,value:h.value,"aria-label":h.$attrs["aria-label"]||v.value,"aria-checked":a(l),"aria-required":h.required,"data-state":a(l)?"checked":"unchecked","data-disabled":a(s)?"":void 0,"as-child":h.asChild,as:h.as,disabled:a(s),onClick:r,onKeydown:ee(Y(r,["prevent"]),["enter"])}),{default:j(()=>[M(h.$slots,"default",{checked:a(l)})]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]),a(m)?(y(),_("input",{key:0,type:"checkbox",name:h.name,tabindex:"-1","aria-hidden":"true",disabled:a(s),required:h.required,value:h.value,checked:!!a(l),"data-state":a(l)?"checked":"unchecked","data-disabled":a(s)?"":void 0,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,_e)):Q("",!0)],64))}}),U=q({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(e){const t=Se();return W(),(n,o)=>{var s;return y(),te(a(F),{"data-state":(s=a(t).checked)!=null&&s.value?"checked":"unchecked","data-disabled":a(t).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:j(()=>[M(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),xe=()=>{const e=b(""),t=b("搜点什么呢"),n=b(""),o=[{title:"秘塔",url:"https://metaso.cn/?q=%s"},{title:"Felo",url:"https://felo.ai/search?q=%s"},{title:"必应",url:"https://www.bing.com/search?q=%s"},{title:"V2EX",url:`https://www.google.com/search?q=%s${encodeURIComponent(" site:v2ex.com")}`},{title:"Luxirty",url:"https://search.luxirty.com/search?q=%s"},{title:"Google",url:"https://www.google.com/search?q=%s"},{title:"DuckDuckGo",url:"https://duckduckgo.com/?q=%s"},{title:"GitHub",url:"https://github.com/search?q=%s&type=repositories"},{title:"OpenDeepWiki",url:"https://opendeep.wiki/",changeDomain:!0},{title:"DeepWiki",url:"https://deepwiki.com/",changeDomain:!0},{title:"Zread",url:"https://zread.ai/",changeDomain:!0},{title:"MDN",url:"https://developer.mozilla.org/en-US/search?q=%s"},{title:"CanIUse",url:"https://caniuse.com/?search=%s"},{title:"LONGMAN",url:"https://www.ldoceonline.com/dictionary/%s"},{title:"DeepL",url:"https://www.deepl.com/en/translator#en/zh-hans/%s"},{title:"GoogleTranslate",url:"https://translate.google.com/?sl=auto&tl=zh-CN&text=%s&op=translate"},{title:"百度翻译",url:"https://fanyi.baidu.com/mtpe-individual/multimodal?query=%s"},{title:"欧路",url:"https://dict.eudic.net/dicts/en/%s"},{title:"汉语词典",url:"https://cidian.yaoxuela.com/zidian/%s"},{title:"掘金",url:"https://juejin.cn/search?query=%s"},{title:"知乎",url:"https://www.zhihu.com/search?type=content&q=%s"},{title:"哔哩哔哩",url:"https://search.bilibili.com/all?keyword=%s"},{title:"YouTube",url:"https://www.youtube.com/results?search_query=%s"}],s=ue(o[0]),l=b(!1),r="lb_search_engine",u="lb_search_history",f="lb_search_engine_switch",m=b(!1),v=d=>{l.value&&(s.value=d,localStorage.setItem(r,d.title))},h=()=>{if(!l.value)return;const d=localStorage.getItem(r)??"",p=o.find(w=>w.title===d);p&&(s.value=p)},c=()=>{const d=e.value.trim();d&&(n.value=d,localStorage.setItem(u,d))},i=()=>{const d=localStorage.getItem(u);d&&(n.value=d)},C=()=>{e.value=n.value},S=()=>{localStorage.setItem(f,String(l.value)),s.value=o[0]},I=()=>{const d=localStorage.getItem(f)==="false";l.value=!d},N=(d=s.value)=>{v(d),c();let p=e.value.trim();if(!p){t.value="输入关键词后才能搜索~";return}const w=/^https?:\/{2}[^\/]+/;if(d.changeDomain&&!w.test(p)){e.value="",t.value="输入 GitHub 仓库链接地址~";return}if(d.changeDomain){const x=p.replace(/^https?:\/{2}[^\/]+/,d.url.slice(0,-1)),O=window.open(x,"_self","noopener,noreferrer");O&&(O.opener=null);return}if(m.value){const x=new Date;x.setMonth(x.getMonth()-6);const O=x.getFullYear(),J=x.getMonth(),X=`after:${O}-${J+1}-01`;p=`${p} ${X}`}const $=d.url.replace("%s",encodeURIComponent(p)),k=window.open($,"_self","noopener,noreferrer");k&&(k.opener=null)};return I(),h(),i(),{keyword:e,placeholder:t,keywordHistory:n,useHistory:C,engineList:o,engine:s,search:N,useLastEngine:l,useAfterHalfYear:m,saveUseLastEngine:S}},Ce={class:"search"},Ee=["placeholder"],qe={class:"search-tool"},Ie={class:"search-history"},Ne=["title"],Oe={key:1},je={class:"tool flex-none flex items-center space-x-4"},De={class:"search-tool-item"},He={class:"search-tool-item"},Le={class:"search-engine-list"},Re=["onClick"],Ge=q({__name:"Search",setup(e){const{keyword:t,placeholder:n,keywordHistory:o,useHistory:s,engineList:l,engine:r,useLastEngine:u,useAfterHalfYear:f,search:m,saveUseLastEngine:v}=xe();return(h,c)=>(y(),_("div",Ce,[g("form",{onSubmit:c[1]||(c[1]=Y(i=>a(m)(),["prevent"]))},[ce(g("input",{class:"search-input",type:"text",placeholder:a(n),"onUpdate:modelValue":c[0]||(c[0]=i=>L(t)?t.value=i:null)},null,8,Ee),[[de,a(t)]])],32),g("section",qe,[g("div",Ie,[a(o)?(y(),_("span",{key:0,class:"search-history-item",title:a(o),onClick:c[2]||(c[2]=i=>a(s)())},G(a(o)),9,Ne)):(y(),_("span",Oe,"--"))]),g("div",je,[g("div",De,[c[6]||(c[6]=g("label",{for:"search-switch-use-last-engine"},"上次使用",-1)),E(a(P),{id:"search-switch-use-last-engine",class:"search-switch",checked:a(u),"onUpdate:checked":[c[3]||(c[3]=i=>L(u)?u.value=i:null),c[4]||(c[4]=i=>a(v)())]},{default:j(()=>[E(a(U),{class:"search-switch-thumb"})]),_:1},8,["checked"])]),g("div",He,[c[7]||(c[7]=g("label",{for:"search-switch-use-this-year"},"近半年",-1)),E(a(P),{id:"search-switch-use-this-year",class:"search-switch",checked:a(f),"onUpdate:checked":c[5]||(c[5]=i=>L(f)?f.value=i:null)},{default:j(()=>[E(a(U),{class:"search-switch-thumb"})]),_:1},8,["checked"])])])]),g("section",null,[g("div",Le,[(y(!0),_(R,null,pe(a(l),i=>(y(),_("div",{class:he({engine:!0,active:i.title===a(r).title}),onClick:C=>a(m)(i)},G(i.title),11,Re))),256))])])]))}});export{Ge as _};
