import{r as w,I as M,d as R,c as f,b as y,v as o,a3 as T,ak as A,x as s,al as S,a1 as V,t as E,K as k,k as q,F,G as K,g as O}from"./framework.CZoYd-ur.js";import{g as C,b as H}from"./index.h8odartg.js";import{C as B,I as W,a as j}from"./theme.h4Fm6vPQ.js";const P=()=>{const u=w(""),n=w("æœç‚¹ä»€ä¹ˆå‘¢"),h=w(""),i=[{title:"ç§˜å¡”",url:"https://metaso.cn/?q=%s"},{title:"Felo",url:"https://felo.ai/search?q=%s"},{title:"å¿…åº”",url:"https://www.bing.com/search?q=%s"},{title:"V2EX",url:`https://www.google.com/search?q=%s${encodeURIComponent(" site:v2ex.com")}`},{title:"ðŸ‘Luxirty",url:"https://search.luxirty.com/search?q=%s"},{title:"Google",url:"https://www.google.com/search?q=%s"},{title:"DuckDuckGo",url:"https://duckduckgo.com/?q=%s"},{title:"GitHub",url:"https://github.com/search?q=%s&type=repositories"},{title:"OpenDeepWiki",url:"https://opendeep.wiki/",changeDomain:!0},{title:"DeepWiki",url:"https://deepwiki.com/",changeDomain:!0},{title:"Zread",url:"https://zread.ai/",changeDomain:!0},{title:"MDN",url:"https://developer.mozilla.org/en-US/search?q=%s"},{title:"CanIUse",url:"https://caniuse.com/?search=%s"},{title:"LONGMAN",url:"https://www.ldoceonline.com/dictionary/%s"},{title:"DeepL",url:"https://www.deepl.com/en/translator#en/zh-hans/%s"},{title:"GoogleTranslate",url:"https://translate.google.com/?sl=auto&tl=zh-CN&text=%s&op=translate"},{title:"ç™¾åº¦ç¿»è¯‘",url:"https://fanyi.baidu.com/mtpe-individual/multimodal?query=%s"},{title:"æ¬§è·¯",url:"https://dict.eudic.net/dicts/en/%s"},{title:"æ±‰è¯­è¯å…¸",url:"https://cidian.yaoxuela.com/zidian/%s"},{title:"æŽ˜é‡‘",url:"https://juejin.cn/search?query=%s"},{title:"çŸ¥ä¹Ž",url:"https://www.zhihu.com/search?type=content&q=%s"},{title:"å“”å“©å“”å“©",url:"https://search.bilibili.com/all?keyword=%s"},{title:"YouTube",url:"https://www.youtube.com/results?search_query=%s"}],r=M(i[0]),c=w(!1),_="lb_search_engine",d="lb_search_history",p="lb_search_engine_switch",g=w(!1),b=e=>{c.value&&(r.value=e,localStorage.setItem(_,e.title))},x=()=>{if(!c.value)return;const e=localStorage.getItem(_)??"",a=i.find(m=>m.title===e);a&&(r.value=a)},t=()=>{const e=u.value.trim();e&&(h.value=e,localStorage.setItem(d,e))},l=()=>{const e=localStorage.getItem(d);e&&(h.value=e)},I=()=>{u.value=h.value},L=()=>{localStorage.setItem(p,String(c.value)),r.value=i[0]},N=()=>{const e=localStorage.getItem(p)==="false";c.value=!e},D=async e=>{if(B.isNativePlatform())return W.openInWebView({url:e,options:j});const m=window.open(e);m&&(m.opener=null)},U=(e=r.value)=>{b(e),t();let a=u.value.trim();if(!a){n.value="è¾“å…¥å…³é”®è¯åŽæ‰èƒ½æœç´¢~";return}const m=/^https?:\/{2}[^\/]+/;if(e.changeDomain&&!m.test(a)){u.value="",n.value="è¾“å…¥ GitHub ä»“åº“é“¾æŽ¥åœ°å€~";return}if(e.changeDomain){const v=a.replace(/^https?:\/{2}[^\/]+/,e.url.slice(0,-1));D(v);return}if(g.value){const v=new Date;v.setMonth(v.getMonth()-6);const Y=v.getFullYear(),$=v.getMonth(),z=`after:${Y}-${$+1}-01`;a=`${a} ${z}`}const G=e.url.replace("%s",encodeURIComponent(a));D(G)};return N(),x(),l(),{keyword:u,placeholder:n,keywordHistory:h,useHistory:I,engineList:i,engine:r,search:U,useLastEngine:c,useAfterHalfYear:g,saveUseLastEngine:L}},X={class:"search"},Z=["placeholder"],J={class:"search-tool"},Q={class:"search-history"},ee=["title"],te={key:1},se={class:"tool flex-none flex items-center space-x-4"},le={class:"search-tool-item"},oe={class:"search-tool-item"},ae={class:"search-engine-list"},ie=["onClick"],ue=R({__name:"Search",setup(u){const{keyword:n,placeholder:h,keywordHistory:i,useHistory:r,engineList:c,engine:_,useLastEngine:d,useAfterHalfYear:p,search:g,saveUseLastEngine:b}=P();return(x,t)=>(y(),f("div",X,[o("form",{onSubmit:t[1]||(t[1]=V(l=>s(g)(),["prevent"]))},[T(o("input",{class:"search-input",type:"text",placeholder:s(h),"onUpdate:modelValue":t[0]||(t[0]=l=>S(n)?n.value=l:null)},null,8,Z),[[A,s(n)]])],32),o("section",J,[o("div",Q,[s(i)?(y(),f("span",{key:0,class:"search-history-item",title:s(i),onClick:t[2]||(t[2]=l=>s(r)())},E(s(i)),9,ee)):(y(),f("span",te,"--"))]),o("div",se,[o("div",le,[t[6]||(t[6]=o("label",{for:"search-switch-use-last-engine"},"ä¸Šæ¬¡ä½¿ç”¨",-1)),k(s(C),{id:"search-switch-use-last-engine",class:"search-switch",checked:s(d),"onUpdate:checked":[t[3]||(t[3]=l=>S(d)?d.value=l:null),t[4]||(t[4]=l=>s(b)())]},{default:q(()=>[k(s(H),{class:"search-switch-thumb"})]),_:1},8,["checked"])]),o("div",oe,[t[7]||(t[7]=o("label",{for:"search-switch-use-this-year"},"è¿‘åŠå¹´",-1)),k(s(C),{id:"search-switch-use-this-year",class:"search-switch",checked:s(p),"onUpdate:checked":t[5]||(t[5]=l=>S(p)?p.value=l:null)},{default:q(()=>[k(s(H),{class:"search-switch-thumb"})]),_:1},8,["checked"])])])]),o("section",null,[o("div",ae,[(y(!0),f(F,null,K(s(c),l=>(y(),f("div",{class:O({engine:!0,active:l.title===s(_).title}),onClick:I=>s(g)(l)},E(l.title),11,ie))),256))])])]))}});export{ue as _};
