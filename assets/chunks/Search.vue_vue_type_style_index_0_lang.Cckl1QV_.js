import{d as E,aj as Z,s as D,c as _,b as y,K as q,a as Q,k as j,f as M,x as n,O as T,$ as ee,a1 as Y,F as L,j as te,ak as A,r as b,w as B,P as se,h as H,al as ae,am as ne,n as le,an as oe,ao as re,Y as ie,I as ce,v as g,a3 as ue,ap as de,aq as R,t as G,G as pe,g as he}from"./framework.5L2ULDRi.js";function fe(e,t){const a=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(a);return[s=>{const l=se(o,s);if(l||l===null)return l;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},s=>(ie(o,s),s)]}function me(e){let t=!1,a;const o=re(!0);return(...s)=>(t||(a=o.run(()=>e(...s)),t=!0),a)}function K(e){return typeof e=="function"?e():n(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ve=e=>typeof e<"u";function V(e){var t;const a=K(e);return(t=a==null?void 0:a.$el)!=null?t:a}function ge(e){return JSON.parse(JSON.stringify(e))}function ye(e,t,a,o={}){var s,l,r;const{clone:c=!1,passive:f=!1,eventName:m,deep:v=!1,defaultValue:h,shouldEmit:u}=o,i=A(),C=a||(i==null?void 0:i.emit)||((s=i==null?void 0:i.$emit)==null?void 0:s.bind(i))||((r=(l=i==null?void 0:i.proxy)==null?void 0:l.$emit)==null?void 0:r.bind(i==null?void 0:i.proxy));let S=m;S=S||`update:${t.toString()}`;const I=p=>c?typeof c=="function"?c(p):ge(p):p,N=()=>ve(e[t])?I(e[t]):h,d=p=>{u?u(p)&&C(S,p):C(S,p)};if(f){const p=N(),w=b(p);let $=!1;return B(()=>e[t],k=>{$||($=!0,w.value=I(k),le(()=>$=!1))}),B(w,k=>{!$&&(k!==e[t]||v)&&d(k)},{deep:v}),w}else return D({get(){return N()},set(p){d(p)}})}function z(e){return e?e.flatMap(t=>t.type===L?z(t.children):[t]):[]}function be(e){return D(()=>{var t;return K(e)?!!((t=V(e))!=null&&t.closest("form")):!0})}function W(){const e=A(),t=b(),a=D(()=>{var r,c;return["#text","#comment"].includes((r=t.value)==null?void 0:r.$el.nodeName)?(c=t.value)==null?void 0:c.$el.nextElementSibling:V(t)}),o=Object.assign({},e.exposed),s={};for(const r in e.props)Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>e.props[r]});if(Object.keys(o).length>0)for(const r in o)Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>o[r]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=s;function l(r){t.value=r,r&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>r instanceof Element?r:r.$el}),e.exposed=s)}return{forwardRef:l,currentRef:t,currentElement:a}}const we=E({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:a}){return()=>{var o,s;if(!a.default)return null;const l=z(a.default()),r=l.findIndex(v=>v.type!==ae);if(r===-1)return l;const c=l[r];(o=c.props)==null||delete o.ref;const f=c.props?T(t,c.props):t;t.class&&(s=c.props)!=null&&s.class&&delete c.props.class;const m=ne(c,f);for(const v in f)v.startsWith("on")&&(m.props||(m.props={}),m.props[v]=f[v]);return l.length===1?m:(l[r]=m,l)}}}),F=E({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:a}){const o=e.asChild?"template":e.as;return typeof o=="string"&&["area","img","input"].includes(o)?()=>H(o,t):o!=="template"?()=>H(e.as,t,{default:a.default}):()=>H(we,t,{default:a.default})}});oe({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});me(()=>b([]));function ke(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}ke();const _e=["name","disabled","required","value","checked","data-state","data-disabled"],[Se,$e]=fe("SwitchRoot"),P=E({__name:"SwitchRoot",props:{defaultChecked:{type:Boolean},checked:{type:Boolean,default:void 0},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"}},emits:["update:checked"],setup(e,{emit:t}){const a=e,o=t,{disabled:s}=Z(a),l=ye(a,"checked",o,{defaultValue:a.defaultChecked,passive:a.checked===void 0});function r(){s.value||(l.value=!l.value)}const{forwardRef:c,currentElement:f}=W(),m=be(f),v=D(()=>{var h;return a.id&&f.value?(h=document.querySelector(`[for="${a.id}"]`))==null?void 0:h.innerText:void 0});return $e({checked:l,toggleCheck:r,disabled:s}),(h,u)=>(y(),_(L,null,[q(n(F),T(h.$attrs,{id:h.id,ref:n(c),role:"switch",type:h.as==="button"?"button":void 0,value:h.value,"aria-label":h.$attrs["aria-label"]||v.value,"aria-checked":n(l),"aria-required":h.required,"data-state":n(l)?"checked":"unchecked","data-disabled":n(s)?"":void 0,"as-child":h.asChild,as:h.as,disabled:n(s),onClick:r,onKeydown:ee(Y(r,["prevent"]),["enter"])}),{default:j(()=>[M(h.$slots,"default",{checked:n(l)})]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]),n(m)?(y(),_("input",{key:0,type:"checkbox",name:h.name,tabindex:"-1","aria-hidden":"true",disabled:n(s),required:h.required,value:h.value,checked:!!n(l),"data-state":n(l)?"checked":"unchecked","data-disabled":n(s)?"":void 0,style:{transform:"translateX(-100%)",position:"absolute",pointerEvents:"none",opacity:0,margin:0}},null,8,_e)):Q("",!0)],64))}}),U=E({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(e){const t=Se();return W(),(a,o)=>{var s;return y(),te(n(F),{"data-state":(s=n(t).checked)!=null&&s.value?"checked":"unchecked","data-disabled":n(t).disabled.value?"":void 0,"as-child":a.asChild,as:a.as},{default:j(()=>[M(a.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),xe=()=>{const e=b(""),t=b("搜点什么呢"),a=b(""),o=[{title:"秘塔",url:"https://metaso.cn/?q=%s"},{title:"Felo",url:"https://felo.ai/search?q=%s"},{title:"必应",url:"https://www.bing.com/search?q=%s"},{title:"V2EX",url:`https://www.google.com/search?q=%s${encodeURIComponent(" site:v2ex.com")}`},{title:"Luxirty",url:"https://search.luxirty.com/search?q=%s"},{title:"Google",url:"https://www.google.com/search?q=%s"},{title:"DuckDuckGo",url:"https://duckduckgo.com/?q=%s"},{title:"GitHub",url:"https://github.com/search?q=%s&type=repositories"},{title:"OpenDeepWiki",url:"https://opendeep.wiki/",changeDomain:!0},{title:"DeepWiki",url:"https://deepwiki.com/",changeDomain:!0},{title:"Zread",url:"https://zread.ai/",changeDomain:!0},{title:"MDN",url:"https://developer.mozilla.org/en-US/search?q=%s"},{title:"CanIUse",url:"https://caniuse.com/?search=%s"},{title:"LONGMAN",url:"https://www.ldoceonline.com/dictionary/%s"},{title:"DeepL",url:"https://www.deepl.com/en/translator#en/zh-hans/%s"},{title:"GoogleTranslate",url:"https://translate.google.com/?sl=auto&tl=zh-CN&text=%s&op=translate"},{title:"百度翻译",url:"https://fanyi.baidu.com/mtpe-individual/multimodal?query=%s"},{title:"欧路",url:"https://dict.eudic.net/dicts/en/%s"},{title:"汉语词典",url:"https://cidian.yaoxuela.com/zidian/%s"},{title:"掘金",url:"https://juejin.cn/search?query=%s"},{title:"知乎",url:"https://www.zhihu.com/search?type=content&q=%s"},{title:"哔哩哔哩",url:"https://search.bilibili.com/all?keyword=%s"},{title:"YouTube",url:"https://www.youtube.com/results?search_query=%s"}],s=ce(o[0]),l=b(!1),r="lb_search_engine",c="lb_search_history",f="lb_search_engine_switch",m=b(!1),v=d=>{l.value&&(s.value=d,localStorage.setItem(r,d.title))},h=()=>{if(!l.value)return;const d=localStorage.getItem(r)??"",p=o.find(w=>w.title===d);p&&(s.value=p)},u=()=>{const d=e.value.trim();d&&(a.value=d,localStorage.setItem(c,d))},i=()=>{const d=localStorage.getItem(c);d&&(a.value=d)},C=()=>{e.value=a.value},S=()=>{localStorage.setItem(f,String(l.value)),s.value=o[0]},I=()=>{const d=localStorage.getItem(f)==="false";l.value=!d},N=(d=s.value)=>{v(d),u();let p=e.value.trim();if(!p){t.value="输入关键词后才能搜索~";return}const w=/^https?:\/{2}[^\/]+/;if(d.changeDomain&&!w.test(p)){e.value="",t.value="输入 GitHub 仓库链接地址~";return}if(d.changeDomain){const x=p.replace(/^https?:\/{2}[^\/]+/,d.url.slice(0,-1)),O=window.open(x,"_self","noopener,noreferrer");O&&(O.opener=null);return}if(m.value){const x=new Date;x.setMonth(x.getMonth()-6);const O=x.getFullYear(),J=x.getMonth(),X=`after:${O}-${J+1}-01`;p=`${p} ${X}`}const $=d.url.replace("%s",encodeURIComponent(p)),k=window.open($,"_self","noopener,noreferrer");k&&(k.opener=null)};return I(),h(),i(),{keyword:e,placeholder:t,keywordHistory:a,useHistory:C,engineList:o,engine:s,search:N,useLastEngine:l,useAfterHalfYear:m,saveUseLastEngine:S}},Ce={class:"search"},qe=["placeholder"],Ee={class:"search-tool"},Ie={class:"search-history"},Ne=["title"],Oe={key:1},je={class:"tool flex-none flex items-center space-x-4"},De={class:"search-tool-item"},He={class:"search-tool-item"},Re={class:"search-engine-list"},Le=["onClick"],Ge=E({__name:"Search",setup(e){const{keyword:t,placeholder:a,keywordHistory:o,useHistory:s,engineList:l,engine:r,useLastEngine:c,useAfterHalfYear:f,search:m,saveUseLastEngine:v}=xe();return(h,u)=>(y(),_("div",Ce,[g("form",{onSubmit:u[1]||(u[1]=Y(i=>n(m)(),["prevent"]))},[ue(g("input",{class:"search-input",type:"text",placeholder:n(a),"onUpdate:modelValue":u[0]||(u[0]=i=>R(t)?t.value=i:null)},null,8,qe),[[de,n(t)]])],32),g("section",Ee,[g("div",Ie,[n(o)?(y(),_("span",{key:0,class:"search-history-item",title:n(o),onClick:u[2]||(u[2]=i=>n(s)())},G(n(o)),9,Ne)):(y(),_("span",Oe,"--"))]),g("div",je,[g("div",De,[u[6]||(u[6]=g("label",{for:"search-switch-use-last-engine"},"上次使用",-1)),q(n(P),{id:"search-switch-use-last-engine",class:"search-switch",checked:n(c),"onUpdate:checked":[u[3]||(u[3]=i=>R(c)?c.value=i:null),u[4]||(u[4]=i=>n(v)())]},{default:j(()=>[q(n(U),{class:"search-switch-thumb"})]),_:1},8,["checked"])]),g("div",He,[u[7]||(u[7]=g("label",{for:"search-switch-use-this-year"},"近半年",-1)),q(n(P),{id:"search-switch-use-this-year",class:"search-switch",checked:n(f),"onUpdate:checked":u[5]||(u[5]=i=>R(f)?f.value=i:null)},{default:j(()=>[q(n(U),{class:"search-switch-thumb"})]),_:1},8,["checked"])])])]),g("section",null,[g("div",Re,[(y(!0),_(L,null,pe(n(l),i=>(y(),_("div",{class:he({engine:!0,active:i.title===n(r).title}),onClick:C=>n(m)(i)},G(i.title),11,Le))),256))])])]))}});export{Ge as _};
