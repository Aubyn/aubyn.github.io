import{l as i,c as a,b as n,ai as l}from"./chunks/framework.DfOqixww.js";const C=JSON.parse('{"title":"QEMU-KVM è™šæ‹ŸåŒ–","description":"","frontmatter":{},"headers":[],"relativePath":"blog/linux/virtual_qemu_kvm.md","filePath":"blog/linux/virtual_qemu_kvm.md"}'),h={name:"blog/linux/virtual_qemu_kvm.md"};function p(k,s,t,e,F,r){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="qemu-kvm-è™šæ‹ŸåŒ–" tabindex="-1">QEMU-KVM è™šæ‹ŸåŒ– <a class="header-anchor" href="#qemu-kvm-è™šæ‹ŸåŒ–" aria-label="Permalink to &quot;QEMU-KVM è™šæ‹ŸåŒ–&quot;">â€‹</a></h1><h2 id="why" tabindex="-1">why <a class="header-anchor" href="#why" aria-label="Permalink to &quot;why&quot;">â€‹</a></h2><p>ä½¿ç”¨ Windows æˆ– Linux çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸å¯èƒ½é‡åˆ°<strong>ç³»ç»Ÿçªç„¶å´©æºƒ</strong>çš„æƒ…å†µï¼Œæ•°æ®ä¸¢å¤±æ— æ³•å¤åŸï¼ŒåŒæ—¶æ— æ³•ç»§ç»­å·¥ä½œã€‚è¦ä¹ˆæ’æŸ¥è§£å†³é—®é¢˜ï¼Œè¦ä¹ˆé‡è£…ç³»ç»Ÿæ¶ˆé™¤é—®é¢˜ï¼Œè¦ä¹ˆé‡æ–°æ¢ä¸€å°ç”µè„‘ï¼Œä¿®å¤éå¸¸æ¼«é•¿ã€è¢«åŠ¨ã€‚</p><p>ä½†å‡¡æ¶‰åŠåˆ°é‡è£…æˆ–è€…æ¢ç”µè„‘ï¼Œå¾€å¾€å°±éœ€è¦ä¸€ç³»åˆ—çš„å·¥ä½œç¯å¢ƒæ¢å¤ï¼šé…ç½®ç”µè„‘ç½‘ç»œã€å®‰è£…å¸¸ç”¨è½¯ä»¶å¹¶ç™»å½•ç­‰ç­‰ã€‚æ—¶é—´éå¸¸ä¹…ï¼Œå¯¼è‡´æˆ‘ä»¬çš„å·¥ä½œè¢«æ‹–å»¶ã€‚</p><p><strong>è§£å†³é—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œä¾¿æ˜¯ä½¿ç”¨è™šæ‹Ÿæœº</strong>ã€‚å°†æˆ‘ä»¬æ‰€æœ‰çš„å·¥ä½œç›¸å…³å†…å®¹éƒ½è½¬ç§»åˆ°è™šæ‹Ÿæœºç³»ç»Ÿä¸­ï¼Œå®šæœŸç”Ÿæˆå¿«ç…§ï¼Œå®šæœŸå°†å¿«ç…§æ–‡ä»¶è½¬å­˜ã€‚è¿™æ ·å½“æˆ‘ä»¬è™šæ‹Ÿæœºç³»ç»Ÿçªç„¶æŒ‚æ‰çš„æ—¶å€™ï¼Œèƒ½<strong>å¿«é€Ÿåœ°æ¢å¤åˆ°ä¸Šä¸€æ¬¡å¿«ç…§</strong>çš„æƒ…å†µï¼ŒåŒæ—¶æ— éœ€å†å¤„ç†å„ç§å·¥ä½œç¯å¢ƒæ¢å¤çš„äº‹æƒ…ï¼Œå¢åŠ äº†æˆ‘ä»¬å·¥ä½œç¯å¢ƒçš„å¯é æ€§ã€‚å½“æˆ‘ä»¬å®¿ä¸»ç³»ç»ŸæŒ‚æ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¦ä¸€å°ç”µè„‘ä¸Šå¯¼å…¥å¿«ç…§å¹¶å¯åŠ¨ï¼ŒåŒæ ·å¿«é€Ÿæ¢å¤å·¥ä½œã€‚</p><h3 id="â—‹-æ¦‚å¿µ" tabindex="-1">â—‹ æ¦‚å¿µ <a class="header-anchor" href="#â—‹-æ¦‚å¿µ" aria-label="Permalink to &quot;â—‹ æ¦‚å¿µ&quot;">â€‹</a></h3><p><code>kvm</code>ï¼šè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œåº•å±‚å®ç°ã€‚æä¾› cpu å’Œå†…å­˜çš„è™šæ‹ŸåŒ–æ¨¡æ‹Ÿï¼Œæ€§èƒ½æé«˜ã€‚</p><p><code>QUMU</code>ï¼šè™šæ‹Ÿå™¨ï¼Œè™šæ‹Ÿæœºç¡¬ä»¶ç¯å¢ƒæ¨¡æ‹Ÿï¼ˆç¡¬ç›˜ã€ç½‘ç»œç­‰ï¼‰ã€‚æä¾›å¤–å›´è®¾å¤‡æ¨¡æ‹Ÿï¼Œio æ€§èƒ½è¾ƒé«˜ã€‚</p><p><code>virtio</code>ï¼šè™šæ‹Ÿæœºç³»ç»Ÿç¡¬ä»¶é©±åŠ¨ï¼Œå®ç°å’Œè™šæ‹Ÿå™¨å®ç°é«˜æ€§èƒ½è®¾å¤‡äº¤äº’ã€‚å…¶ä¸­ virtio-win é€‚ç”¨äº windowsï¼Œå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦åœ¨ bus type ä¸­è®¾ç½®ï¼Œä½¿å…¶èƒ½è¯»å–åˆ°å®‰è£…ä»‹è´¨ã€‚</p><p><code>qxl</code> ï¼šwindows å›¾å½¢é©±åŠ¨ï¼Œå¯å®ç°è°ƒæ•´ç•Œé¢åˆ†è¾¨ç‡</p><p><code>libvirt</code>ï¼šè™šæ‹Ÿæœºç³»ç»Ÿç®¡ç†å·¥å…·</p><p><code>spice</code>ï¼šè¿œç¨‹æ¡Œé¢è®¿é—®è™šæ‹Ÿæœºç³»ç»Ÿï¼Œé«˜æ€§èƒ½ï¼Œæ”¯æŒ usb é‡å®šå‘ã€å‰ªåˆ‡æ¿å…±äº«</p><p><code>rdpå®¢æˆ·ç«¯</code>ï¼šè¿œç¨‹æ¡Œé¢è®¿é—®</p><h2 id="how" tabindex="-1">how <a class="header-anchor" href="#how" aria-label="Permalink to &quot;how&quot;">â€‹</a></h2><p>è™šæ‹Ÿæœºæ–¹æ¡ˆæ¯”è¾ƒå¤šã€‚å¦‚æœå®¿ä¸»ç³»ç»Ÿæ˜¯ Windowsï¼Œè™šæ‹ŸåŒ–å¼•æ“é€‰æ‹© Hyper-Vï¼Œè™šæ‹Ÿç³»ç»Ÿå¯ä»¥é€‰æ‹© WSLã€VirtualBoxã€VMWare ç®¡ç†ã€‚</p><p>å¦‚æœå®¿ä¸»ç³»ç»Ÿæ˜¯ Linuxï¼Œè™šæ‹ŸåŒ–å¼•æ“é€‰æ‹©å†…æ ¸çº§ KVMï¼Œç›¸æ¯” Hyper-Vï¼Œå…·æœ‰æ›´é«˜çš„ io æ€§èƒ½ï¼ŒåŒæ—¶è™šæ‹Ÿæœºç³»ç»Ÿèƒ½ç›´é€š USBï¼ˆä¾¿äº USB åŠ å¯†çš„ç½‘é“¶ï¼‰ã€‚</p><p>æœ¬æ–‡é€‰ç”¨äº† KVM æ–¹å¼æ¥å®ç°è™šæ‹ŸåŒ–ï¼Œæ¢ç´¢è™šæ‹Ÿæœºå¸¦æ¥çš„å¯é æ€§ã€‚</p><p>kvm è™šæ‹Ÿç³»ç»Ÿç®¡ç†æ–¹å¼ï¼š</p><ul><li>é€šè¿‡ virt-manager å¯¼å…¥æ—§é…ç½®ï¼Œä»ç„¶éœ€è¦ä¸€ç›´ç‚¹ç‚¹ç‚¹ï¼Œéº»çƒ¦</li><li>é€šè¿‡ qemu-kvm å‘½ä»¤å¯åŠ¨åˆ™å¯ä»¥é€šè¿‡æ—§è„šæœ¬ä¸€é”®å¯åŠ¨</li></ul><h2 id="what" tabindex="-1">what <a class="header-anchor" href="#what" aria-label="Permalink to &quot;what&quot;">â€‹</a></h2><h3 id="â—‹-å®¿ä¸»å‡†å¤‡-ä»¥-arch-linux-ä¸ºä¾‹" tabindex="-1">â—‹ å®¿ä¸»å‡†å¤‡ï¼ˆä»¥ Arch Linux ä¸ºä¾‹ï¼‰ <a class="header-anchor" href="#â—‹-å®¿ä¸»å‡†å¤‡-ä»¥-arch-linux-ä¸ºä¾‹" aria-label="Permalink to &quot;â—‹ å®¿ä¸»å‡†å¤‡ï¼ˆä»¥ Arch Linux ä¸ºä¾‹ï¼‰&quot;">â€‹</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥ CPU è™šæ‹ŸåŒ–æ”¯æŒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;svm|vmx&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc/cpuinfo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LC_ALL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">C.UTF-8</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lscpu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Virtualization</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥ç³»ç»Ÿå†…æ ¸æ˜¯å¦åŠ è½½äº† KVM æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsmod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kvm</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‡çº§ç³»ç»Ÿï¼Œå®‰è£… qemu</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">paru</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">paru</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> archlinux-keyring</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">paru</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qemu-full</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libvirt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iptables-nft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnsmasq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virt-manager</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ovmf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bridge-utils</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openbsd-netcat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libvirtd.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ ç”¨æˆ·åˆ°ç»„ï¼Œæ‹¥æœ‰è™šæ‹Ÿæœºä½¿ç”¨æƒé™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -aG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libvirt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whoami</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -aG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kvm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whoami</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="â—‹-windows-11-è™šæ‹Ÿç³»ç»Ÿ" tabindex="-1">â—‹ Windows 11 è™šæ‹Ÿç³»ç»Ÿ <a class="header-anchor" href="#â—‹-windows-11-è™šæ‹Ÿç³»ç»Ÿ" aria-label="Permalink to &quot;â—‹ Windows 11 è™šæ‹Ÿç³»ç»Ÿ&quot;">â€‹</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºé•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qemu-img</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qcow2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/work/qemu/win11_24H2.qcow2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100G</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…ç³»ç»Ÿåˆ°é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨å‰ï¼Œå®¿ä¸»è™šæ‹Ÿæœºé¼ æ ‡åŒæ­¥éœ€è¦ usb=on å’Œ usb-tablet</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…å‰ï¼Œç¦æ­¢å®‰å…¨æ£€æµ‹ï¼šshift+f10 -&gt; regedit -&gt; HKEY_LOCAL_MACHINE\\SYSTEM\\Setup -&gt; æ–°å»ºé¡¹ LabConfig -&gt; æ–°å»º DWORD32 çš„é”® BypassTPMCheck BypassRAMCheck BypassSecureBootCheckï¼Œå€¼éƒ½ä¸º 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…å‰ï¼Œé€‰æ‹©ç¡¬ç›˜ï¼ŒLoad Drivers -&gt; E:\\viostor\\&lt;os&gt;\\amd64</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…åï¼Œç¦ç”¨ç½‘ç»œè®¾å¤‡ï¼šshift+f10 -&gt; devmgmt.mscï¼Œå®‰è£…å®Œæˆåé‡æ–°å¯ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…åï¼Œç¦ç”¨å¼ºåˆ¶ç™»å½•ï¼šshift+f10 -&gt; oobe\\bypassnro</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨åï¼Œå®‰è£…é©±åŠ¨ï¼Œè¿è¡Œå…‰ç›˜ä¸­çš„ virtio-win-guest-tools.exe</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qemu-system-x86_64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -enable-kvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -cpu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -smp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -usb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usb-tablet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/work/qemu/win11_24H2.qcow2,index=0,media=disk,if=virtio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/Downloads/Win11_24H2.iso,index=2,media=cdrom</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/Downloads/virtio-win.iso,index=3,media=cdrom</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…é©±åŠ¨ï¼Œè¿è¡Œå…‰ç›˜ä¸­çš„ exe å®‰è£… virtio/spice é©±åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qemu-img</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qcow2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/work/qemu/dummy.qcow2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1G</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qemu-system-x86_64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -enable-kvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -cpu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -smp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -usb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usb-tablet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/work/qemu/win11_24H2.qcow2,if=ide</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/work/qemu/dummy.qcow2,if=virtio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -cdrom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/Downloads/virtio-win.iso</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨ç³»ç»Ÿï¼Œé spice</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æš‚ä¸æ”¯æŒå£°éŸ³</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æš‚ä¸æ”¯æŒå‰ªåˆ‡æ¿å…±äº«</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qemu-system-x86_64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -enable-kvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -cpu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -smp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -nic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user,model=virtio-net-pci</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -usb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usb-tablet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -vga</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> none</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qxl-vga,vgamem_mb=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/work/qemu/win11_24H2.qcow2,if=virtio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨ç³»ç»Ÿï¼Œspice+qxlï¼Œæµç•…ä½†æ¨¡ç³Š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ”¯æŒå£°éŸ³</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ”¯æŒå‰ªåˆ‡æ¿å…±äº«ï¼ˆspiceï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åç»­ï¼šè‡ªå¯åŠ¨ spiceã€usb é‡å®šå‘æˆ–é€ä¼ </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ­¤å¤„è…¾è®¯å…ƒå®å‚è€ƒæ€§å¼º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qemu-system-x86_64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -enable-kvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -cpu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -smp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -nic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user,model=virtio-net-pci</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -usb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usb-tablet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> intel-hda</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hda-duplex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -vga</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> none</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qxl-vga,vgamem_mb=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtio-serial-pci</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -spice</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port=5930,disable-ticketing=on</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -device</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtserialport,chardev=spicechannel0,name=com.redhat.spice.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -chardev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spicevmc,id=spicechannel0,name=vdagent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -drive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file=~/work/qemu/win11_24H2.qcow2,if=virtio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># spice è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">paru</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spice-gtk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spicy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5930</span></span></code></pre></div><h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">â€‹</a></h2><ul><li><a href="https://wiki.archlinux.org/title/QEMU" target="_blank" rel="noreferrer">QEMU</a>ï¼Œéå¸¸è¯¦ç»†ï¼Œä¼˜å…ˆå‚è€ƒã€‚è™šæ‹Ÿæœºæ€§èƒ½ä¼˜åŒ–ã€virtio é©±åŠ¨ã€spice è¿œç¨‹è¿æ¥</li><li><a href="https://www.feiyunote.cn/posts/Arch%E5%AE%89%E8%A3%85KVM/" target="_blank" rel="noreferrer">Archå®‰è£…KVM | SkyFishå°å°ç«™</a></li><li><a href="https://nova.gal/blog/2024/10/26/%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8-Docker-%E4%B8%8A%E4%BD%BF%E7%94%A8-Qemu-%E5%AE%89%E8%A3%85-Win11" target="_blank" rel="noreferrer">ç®€å•è®°å½•åœ¨æœåŠ¡å™¨ Docker ä¸Šä½¿ç”¨ Qemu å®‰è£… Win11 ğŸ± ãƒã‚³ã®ãƒ¡ãƒ¢å¸³</a></li><li><a href="https://owo.cab/158/" target="_blank" rel="noreferrer">Windows 11 å®‰è£…è¸©å‘è®° | è·³è¿‡å®‰è£…é˜¶æ®µå¾®è½¯è´¦å·ç™»å½• | zhxy-CN ã® å°çª</a>ï¼Œè™šæ‹Ÿæœºå®‰è£… Windows11 è¸©å‘å‚è€ƒ</li><li><a href="https://www.beaclnd.tech/how-to-install-qemu-kvm-virt-manager-on-manjaro-arch-linux" target="_blank" rel="noreferrer">Manjaro/Arch Linuxä¸­å®‰è£…ä½¿ç”¨QEMU/KVM/virt-managerè¿è¡Œè™šæ‹Ÿæœº</a></li><li><a href="https://github.com/yifengyou/learn-kvm" target="_blank" rel="noreferrer">QEMU KVMå­¦ä¹ ç¬”è®°</a></li><li><a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/" target="_blank" rel="noreferrer">virtio-win.iso</a></li></ul>`,26)]))}const g=i(h,[["render",p]]);export{C as __pageData,g as default};
